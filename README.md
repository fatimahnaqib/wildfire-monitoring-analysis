# Wildfire Monitoring & Analysis Pipeline ðŸŒðŸ”¥

This project sets up a data pipeline for near real-time wildfire monitoring using:
- NASA FIRMS API (VIIRS)
- Apache Airflow
- Apache Kafka
- PostgreSQL
- Python (Kafka consumer + Folium mapping)

---

## ðŸ”§ Architecture Overview

```mermaid
flowchart TD
    A["NASA FIRMS CSV (Remote URL)"] --> B["Airflow DAG: download_wildfire_api_csv"]
    B --> C["Airflow DAG: produce_to_kafka"]
    C --> D["Kafka Topic: wildfire_data"]
    D --> E["Kafka Consumer (Python): consume_messages"]
    E --> F["PostgreSQL: wildfire_events Table"]
    F --> G["Airflow DAG: generate_wildfire_map"]
    G --> H["HTML Map: /opt/airflow/dashboard/wildfire_map.html"]
```

---

## ðŸ“‚ Project Structure

```
wildfire-monitoring-analysis/
â”‚
â”œâ”€â”€ airflow/                  # Airflow DAGs & ETL logic
â”‚   â”œâ”€â”€ dags/
â”‚   â”‚   â””â”€â”€ wildfire_etl_dag.py
â”‚   â””â”€â”€ etl/
â”‚       â”œâ”€â”€ download.py
â”‚       â”œâ”€â”€ kafka_producer.py
â”‚       â”œâ”€â”€ generate_map.py
â”‚       â””â”€â”€ config.py
â”‚
â”œâ”€â”€ kafka_consumer/           # Kafka consumer to PostgreSQL
â”‚   â”œâ”€â”€ consumer.py
â”‚   â”œâ”€â”€ create_topic.py (optional)
â”‚   â””â”€â”€ Dockerfile
â”‚
â”œâ”€â”€ postgres/
â”‚   â””â”€â”€ init/
â”‚       â””â”€â”€ init.sql          # Creates `wildfire_db` and `wildfire_events` table
â”‚
â”œâ”€â”€ dashboard/                # Generated HTML wildfire map
â”œâ”€â”€ data/                     # Local storage for raw CSV from FIRMS
â”‚
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â””â”€â”€ wildfire-architecture.md
```

---

## ðŸš€ Running the Pipeline

Make sure Docker and Docker Compose are installed. Then run:

```bash
docker-compose up --build
```

Access the Airflow UI at:  
**http://localhost:8080**  
Default login credentials:  
`admin` / `admin`

---

## ðŸ—º Output

- Wildfire data from the past 3 days is fetched via NASA FIRMS API.
- Records are streamed into Kafka and inserted into PostgreSQL.
- An interactive HTML map is generated at `/opt/airflow/dashboard/wildfire_map.html`.

---

## ðŸ—º Example Wildfire Map

Below is a screenshot of the wildfire map generated by the pipeline, showing wildfire activity data for **July 27-29, 2025**.  
*Note: The map updates regularly, so data will vary over time.*

![Wildfire Map Example](dashboard/wildfire_map_screenshot.png)

---

## ðŸ”’ Deduplication Logic

Handled in the Kafka consumer using a unique constraint:

```sql
UNIQUE (latitude, longitude, acq_date, acq_time, satellite)
```

If a duplicate is encountered, the insertion is skipped to avoid redundancy.

---

## ðŸ“¦ Tech Stack

- **Python 3.11**
- **Apache Airflow 2.8.1**
- **PostgreSQL 14**
- **Apache Kafka (Bitnami)**
- **Docker Compose**
- **Folium** for map generation
